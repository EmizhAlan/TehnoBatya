{% extends "base.html" %}

{% block title %}Ремонт компьютеров и ноутбуков - ТЕХНО БАТЯ{% endblock %}

{% block content %}
<!-- Стили для страницы ремонта ПК и ноутбуков -->
<style>
    // Конфигурация API
const API_CONFIG = {
    PC_REPAIR_ENDPOINT: '/api/pc-repair/request',
    METHODS: {
        POST: 'POST'
    },
    RESPONSE_TIMEOUT: 10000
};

// Утилиты для работы с DOM
const DOMUtils = {
    getElement: (selector) => document.querySelector(selector),
    getElements: (selector) => document.querySelectorAll(selector),
    
    showLoading: (element, loadingText = 'Отправка...') => {
        const originalHTML = element.innerHTML;
        const originalDisabled = element.disabled;
        
        element.innerHTML = `<i class="fas fa-spinner fa-spin"></i> ${loadingText}`;
        element.disabled = true;
        
        return {
            restore: () => {
                element.innerHTML = originalHTML;
                element.disabled = originalDisabled;
            }
        };
    },
    
    showSuccess: (element, successText = 'Отправлено!', duration = 2000) => {
        const originalHTML = element.innerHTML;
        const originalBackground = element.style.background;
        
        element.innerHTML = `<i class="fas fa-check"></i> ${successText}`;
        element.style.background = 'var(--accent-success)';
        
        return new Promise(resolve => {
            setTimeout(() => {
                element.innerHTML = originalHTML;
                element.style.background = originalBackground;
                resolve();
            }, duration);
        });
    }
};

// Форматер телефонных номеров
const PhoneFormatter = {
    format: (value) => {
        const numbers = value.replace(/\D/g, '');
        
        if (numbers.length === 0) return '';
        
        let formatted = '+7';
        if (numbers.length > 1) {
            const firstThree = numbers.substring(1, 4);
            const secondThree = numbers.substring(4, 7);
            const firstTwo = numbers.substring(7, 9);
            const lastTwo = numbers.substring(9, 11);
            
            if (firstThree) formatted += ` (${firstThree}`;
            if (secondThree) formatted += `) ${secondThree}`;
            if (firstTwo) formatted += `-${firstTwo}`;
            if (lastTwo) formatted += `-${lastTwo}`;
        }
        
        return formatted;
    },
    
    getRawNumber: (formatted) => {
        return formatted.replace(/\D/g, '');
    }
};

// Конфигурация плейсхолдеров
const PLACEHOLDER_CONFIG = {
    DEVICE_TYPE: {
        desktop: 'Опишите проблему: характеристики компьютера, когда появилась проблема, предшествующие события...',
        laptop: 'Опишите проблему: модель ноутбука, возраст, как проявляется проблема...',
        monitor: 'Опишите проблему: размер монитора, есть ли изображение, какие артефакты...',
        printer: 'Опишите проблему: модель принтера, что именно не работает, ошибки на дисплее...',
        other: 'Опишите ваше устройство и проблему максимально подробно...'
    },
    
    BRAND_PLACEHOLDER: {
        desktop: 'Например: самосборка, Dell, HP',
        laptop: 'Например: Asus, Lenovo, Acer',
        monitor: 'Например: Samsung, LG, Dell',
        printer: 'Например: HP, Canon, Epson',
        other: 'Производитель устройства'
    },
    
    PROBLEM_DETAILS: {
        not_turning_on: 'Опишите подробно: реагирует ли на кнопку включения, горят ли индикаторы, были ли скачки напряжения...',
        overheating: 'Опишите: как давно начался перегрев, выключается ли сам, какие программы запущены, чистили ли систему охлаждения...',
        bsod: 'Опишите: код ошибки если есть, при каких действиях появляется, как часто возникает...',
        slow: 'Опишите: какие программы тормозят, давно ли проблема, пытались ли чистить систему, характеристики компьютера...',
        no_display: 'Опишите: есть ли изображение при запуске, слышны ли звуки работы системы, проверяли ли монитор...',
        virus: 'Опишите: какие симптомы заражения, какие антивирусы использовали, что пытались удалить...',
        data_recovery: 'Опишите: что случилось с данными, тип накопителя, важность данных, пытались ли восстановить...',
        other: 'Опишите вашу проблему максимально подробно...'
    }
};

// Класс для работы с формой ремонта
class PCRepairForm {
    constructor(formId) {
        this.form = DOMUtils.getElement(formId);
        this.submitBtn = this.form.querySelector('.submit-btn');
        this.phoneInput = DOMUtils.getElement('#phone');
        this.deviceTypeSelect = DOMUtils.getElement('#device_type');
        this.problemTypeSelect = DOMUtils.getElement('#problem_type');
        this.descriptionField = DOMUtils.getElement('#problem_description');
        this.brandField = DOMUtils.getElement('#brand');
        
        this.init();
    }
    
    init() {
        this.bindEvents();
        this.updatePlaceholders();
    }
    
    bindEvents() {
        // Обработка отправки формы
        this.form.addEventListener('submit', this.handleSubmit.bind(this));
        
        // Маска для телефона
        this.phoneInput.addEventListener('input', this.handlePhoneInput.bind(this));
        
        // Динамические плейсхолдеры
        this.deviceTypeSelect.addEventListener('change', () => this.updatePlaceholders());
        this.problemTypeSelect.addEventListener('change', () => this.updateProblemDescription());
    }
    
    async handleSubmit(event) {
        event.preventDefault();
        
        if (!this.validateForm()) {
            return;
        }
        
        const loader = DOMUtils.showLoading(this.submitBtn);
        
        try {
            const formData = new FormData(this.form);
            formData.set('phone', PhoneFormatter.getRawNumber(formData.get('phone')));
            
            const response = await this.sendRequest(formData);
            
            if (response.success) {
                await this.handleSuccess();
            } else {
                this.handleError(response.message || 'Произошла ошибка при отправке формы');
            }
        } catch (error) {
            this.handleError(error.message || 'Ошибка соединения с сервером');
        } finally {
            loader.restore();
        }
    }
    
    validateForm() {
        const requiredFields = this.form.querySelectorAll('[required]');
        let isValid = true;
        
        requiredFields.forEach(field => {
            if (!field.value.trim()) {
                field.classList.add('error');
                isValid = false;
                
                // Удаляем класс ошибки при вводе
                field.addEventListener('input', () => {
                    field.classList.remove('error');
                }, { once: true });
            }
        });
        
        if (!isValid) {
            alert('Пожалуйста, заполните все обязательные поля');
        }
        
        return isValid;
    }
    
    async sendRequest(formData) {
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), API_CONFIG.RESPONSE_TIMEOUT);
        
        try {
            const response = await fetch(API_CONFIG.PC_REPAIR_ENDPOINT, {
                method: API_CONFIG.METHODS.POST,
                body: formData,
                signal: controller.signal
            });
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            return await response.json();
        } finally {
            clearTimeout(timeoutId);
        }
    }
    
    async handleSuccess() {
        await DOMUtils.showSuccess(this.submitBtn);
        
        // Показываем уведомление
        this.showNotification('Спасибо! Ваша заявка на ремонт принята. Мастер свяжется с вами в течение 15 минут.', 'success');
        
        // Сбрасываем форму с задержкой для визуального эффекта
        setTimeout(() => {
            this.form.reset();
            this.updatePlaceholders();
        }, 500);
    }
    
    handleError(message) {
        this.showNotification(`Ошибка: ${message}`, 'error');
    }
    
    showNotification(message, type = 'info') {
        // Создаем элемент уведомления
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        notification.innerHTML = `
            <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
            <span>${message}</span>
            <button class="notification-close"><i class="fas fa-times"></i></button>
        `;
        
        // Стили для уведомления
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${type === 'success' ? 'var(--accent-success)' : 'var(--accent-danger)'};
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 10000;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            animation: slideIn 0.3s ease-out;
        `;
        
        document.body.appendChild(notification);
        
        // Обработка закрытия
        const closeBtn = notification.querySelector('.notification-close');
        closeBtn.onclick = () => {
            notification.style.animation = 'slideOut 0.3s ease-out forwards';
            setTimeout(() => notification.remove(), 300);
        };
        
        // Автоматическое закрытие
        setTimeout(() => {
            if (notification.parentNode) {
                notification.style.animation = 'slideOut 0.3s ease-out forwards';
                setTimeout(() => notification.remove(), 300);
            }
        }, 5000);
    }
    
    handlePhoneInput(event) {
        event.target.value = PhoneFormatter.format(event.target.value);
    }
    
    updatePlaceholders() {
        const deviceType = this.deviceTypeSelect.value;
        
        if (deviceType) {
            this.descriptionField.placeholder = 
                PLACEHOLDER_CONFIG.DEVICE_TYPE[deviceType] || 
                'Опишите вашу проблему...';
            
            this.brandField.placeholder = 
                PLACEHOLDER_CONFIG.BRAND_PLACEHOLDER[deviceType] || 
                'Например: HP, Dell, Asus';
        }
        
        this.updateProblemDescription();
    }
    
    updateProblemDescription() {
        const problemType = this.problemTypeSelect.value;
        
        if (problemType && !this.deviceTypeSelect.value) {
            this.descriptionField.placeholder = 
                PLACEHOLDER_CONFIG.PROBLEM_DETAILS[problemType] || 
                'Опишите вашу проблему...';
        }
    }
}

// Класс для работы с диагностикой
class DiagnosticSystem {
    constructor(buttonId) {
        this.button = DOMUtils.getElement(buttonId);
        this.init();
    }
    
    init() {
        this.button.addEventListener('click', this.handleDiagnosticRequest.bind(this));
    }
    
    async handleDiagnosticRequest() {
        const loader = DOMUtils.showLoading(this.button, 'Отправка запроса...');
        
        try {
            // Здесь можно добавить реальный запрос к API
            await this.simulateDiagnosticRequest();
            
            this.showDiagnosticModal();
        } catch (error) {
            alert('Произошла ошибка при отправке запроса. Пожалуйста, попробуйте еще раз.');
        } finally {
            loader.restore();
        }
    }
    
    simulateDiagnosticRequest() {
        return new Promise(resolve => {
            setTimeout(resolve, 1500);
        });
    }
    
    showDiagnosticModal() {
        const modal = document.createElement('div');
        modal.className = 'diagnostic-modal';
        modal.innerHTML = `
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-search"></i> Запрос отправлен</h3>
                    <button class="modal-close"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body">
                    <div class="success-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h4>Спасибо за ваш запрос!</h4>
                    <p>Наш специалист свяжется с вами в ближайшее время для уточнения деталей и записи на бесплатную диагностику.</p>
                    <div class="modal-actions">
                        <button class="btn btn-primary" id="close-modal">Хорошо</button>
                    </div>
                </div>
            </div>
        `;
        
        // Добавляем стили для модального окна
        modal.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
        `;
        
        const modalContent = modal.querySelector('.modal-content');
        modalContent.style.cssText = `
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            animation: slideUp 0.3s ease-out;
        `;
        
        document.body.appendChild(modal);
        
        // Обработка закрытия модального окна
        const closeModal = () => {
            modal.style.animation = 'fadeOut 0.3s ease-out forwards';
            setTimeout(() => modal.remove(), 300);
        };
        
        modal.querySelector('.modal-close').onclick = closeModal;
        modal.querySelector('#close-modal').onclick = closeModal;
        modal.onclick = (e) => {
            if (e.target === modal) closeModal();
        };
    }
}

// Инициализация при загрузке страницы
document.addEventListener('DOMContentLoaded', () => {
    // Инициализация формы ремонта
    const repairForm = new PCRepairForm('#pcRepairRequestForm');
    
    // Инициализация системы диагностики
    const diagnosticSystem = new DiagnosticSystem('#start-diagnostic');
    
    // Добавляем CSS анимации
    const style = document.createElement('style');
    style.textContent = `
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .notification-close {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 0;
            font-size: 14px;
            opacity: 0.8;
            transition: opacity 0.2s;
        }
        
        .notification-close:hover {
            opacity: 1;
        }
        
        input.error {
            border-color: var(--accent-danger) !important;
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        .success-icon {
            text-align: center;
            font-size: 4rem;
            color: var(--accent-success);
            margin: 20px 0;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-header h3 {
            margin: 0;
            color: var(--text-primary);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.2rem;
            color: var(--text-tertiary);
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .modal-close:hover {
            color: var(--text-primary);
        }
        
        .modal-body h4 {
            text-align: center;
            margin: 20px 0 10px;
            color: var(--text-primary);
        }
        
        .modal-body p {
            text-align: center;
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        .modal-actions {
            text-align: center;
        }
    `;
    document.head.appendChild(style);
});
    /* Переменные для светлой темы */
:root {
    /* Цвета фона */
    --bg-primary: #ffffff;
    --bg-secondary: #f8f9fa;
    --bg-tertiary: #e9ecef;
    --card-bg: #ffffff;
    --input-bg: #ffffff;
    
    /* Цвета текста */
    --text-primary: #212529;
    --text-secondary: #495057;
    --text-tertiary: #6c757d;
    --input-text: #212529;
    
    /* Цвета акцентов */
    --accent-primary: #4361ee;
    --accent-primary-rgb: 67, 97, 238;
    --accent-secondary: #3a0ca3;
    --accent-info: #4361ee;
    --accent-info-rgb: 67, 97, 238;
    --accent-success: #06d6a0;
    --accent-warning: #ffd166;
    --accent-danger: #ef476f;
    
    /* Границы и тени */
    --border-color: #dee2e6;
    --input-border: #ced4da;
    --shadow-color: rgba(0, 0, 0, 0.1);
    
    /* Дополнительные цвета для ПК и ноутбуков */
    --pc-color: #4361ee;
    --pc-color-rgb: 67, 97, 238;
    --laptop-color: #7209b7;
    --laptop-color-rgb: 114, 9, 183;
    --hardware-color: #f72585;
    --hardware-color-rgb: 247, 37, 133;
    --software-color: #4cc9f0;
    --software-color-rgb: 76, 201, 240;
    --data-color: #06d6a0;
    --data-color-rgb: 6, 214, 160;
}

/* Переменные для темной темы */
body.dark-theme {
    /* Цвета фона */
    --bg-primary: #121212;
    --bg-secondary: #1e1e1e;
    --bg-tertiary: #2d2d2d;
    --card-bg: #1e1e1e;
    --input-bg: #2d2d2d;
    
    /* Цвета текста */
    --text-primary: #f8f9fa;
    --text-secondary: #e9ecef;
    --text-tertiary: #adb5bd;
    --input-text: #f8f9fa;
    
    /* Цвета акцентов */
    --accent-primary: #5a7dff;
    --accent-primary-rgb: 90, 125, 255;
    --accent-secondary: #4a0dff;
    --accent-info: #5a7dff;
    --accent-info-rgb: 90, 125, 255;
    --accent-success: #1ce9a8;
    --accent-warning: #ffe169;
    --accent-danger: #ff6b8b;
    
    /* Границы и тени */
    --border-color: #404040;
    --input-border: #495057;
    --shadow-color: rgba(0, 0, 0, 0.3);
    
    /* Дополнительные цвета для ПК и ноутбуков */
    --pc-color: #5a7dff;
    --pc-color-rgb: 90, 125, 255;
    --laptop-color: #9d4edd;
    --laptop-color-rgb: 157, 78, 221;
    --hardware-color: #ff6b9d;
    --hardware-color-rgb: 255, 107, 157;
    --software-color: #64e6ff;
    --software-color-rgb: 100, 230, 255;
    --data-color: #1ce9a8;
    --data-color-rgb: 28, 233, 168;
}

/* Базовые стили для страницы */
.pc-repair-hero {
    background: linear-gradient(135deg, var(--pc-color), var(--laptop-color));
    color: white;
    padding: 100px 0 60px;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.pc-repair-hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect x="20" y="20" width="60" height="60" rx="5" fill="rgba(255, 255, 255, 0.1)"/><rect x="40" y="10" width="20" height="10" fill="rgba(255, 255, 255, 0.1)"/></svg>');
    background-size: 80px 80px;
}

.pc-repair-hero-content {
    position: relative;
    z-index: 1;
    max-width: 800px;
    margin: 0 auto;
    padding: 0 20px;
}

.pc-repair-hero h1 {
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: 800;
    margin-bottom: 20px;
    line-height: 1.2;
}

.pc-repair-hero p {
    font-size: clamp(1rem, 2.5vw, 1.2rem);
    opacity: 0.9;
    margin-bottom: 30px;
    line-height: 1.6;
}

.pc-repair-badge {
    display: inline-block;
    background: rgba(255, 255, 255, 0.2);
    padding: 10px 25px;
    border-radius: 50px;
    font-size: clamp(0.9rem, 2vw, 1rem);
    font-weight: 600;
    margin-bottom: 30px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
}

/* Кнопки */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: clamp(12px, 3vw, 16px) clamp(20px, 4vw, 32px);
    border-radius: 12px;
    font-size: clamp(1rem, 2vw, 1.1rem);
    font-weight: 600;
    text-decoration: none;
    border: 2px solid transparent;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-primary {
    background: linear-gradient(135deg, var(--pc-color), var(--laptop-color));
    color: white;
    box-shadow: 0 8px 25px rgba(var(--pc-color-rgb, 67, 97, 238), 0.3);
}

.btn-primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 35px rgba(var(--pc-color-rgb, 67, 97, 238), 0.4);
}

/* Услуги ремонта ПК и ноутбуков */
.services-section {
    padding: clamp(40px, 8vw, 80px) 0;
    background: var(--bg-secondary);
}

.section-header {
    text-align: center;
    margin-bottom: clamp(30px, 6vw, 60px);
}

.section-title {
    font-size: clamp(1.8rem, 4vw, 2.5rem);
    font-weight: 700;
    margin-bottom: 20px;
    color: var(--text-primary);
}

.section-subtitle {
    font-size: clamp(1rem, 2vw, 1.2rem);
    color: var(--text-secondary);
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
}

.services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(300px, 100%), 1fr));
    gap: clamp(20px, 4vw, 30px);
}

.service-card {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 15px;
    padding: clamp(20px, 4vw, 30px);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.service-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 40px var(--shadow-color);
}

.service-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 5px;
    height: 100%;
    background: linear-gradient(to bottom, var(--accent-info), var(--accent-secondary));
}

.service-card.pc::before {
    background: linear-gradient(to bottom, var(--pc-color), rgb(var(--pc-color-rgb, 67, 97, 238), 0.7));
}

.service-card.laptop::before {
    background: linear-gradient(to bottom, var(--laptop-color), rgb(var(--laptop-color-rgb, 114, 9, 183), 0.7));
}

.service-card.hardware::before {
    background: linear-gradient(to bottom, var(--hardware-color), rgb(var(--hardware-color-rgb, 247, 37, 133), 0.7));
}

.service-card.software::before {
    background: linear-gradient(to bottom, var(--software-color), rgb(var(--software-color-rgb, 76, 201, 240), 0.7));
}

.service-card.data::before {
    background: linear-gradient(to bottom, var(--data-color), rgb(var(--data-color-rgb, 6, 214, 160), 0.7));
}

.service-icon {
    font-size: clamp(2rem, 5vw, 2.5rem);
    margin-bottom: 20px;
    color: var(--accent-info);
}

.service-card.pc .service-icon {
    color: var(--pc-color);
}

.service-card.laptop .service-icon {
    color: var(--laptop-color);
}

.service-card.hardware .service-icon {
    color: var(--hardware-color);
}

.service-card.software .service-icon {
    color: var(--software-color);
}

.service-card.data .service-icon {
    color: var(--data-color);
}

.service-card h3 {
    font-size: clamp(1.2rem, 3vw, 1.4rem);
    font-weight: 600;
    margin-bottom: 15px;
    color: var(--text-primary);
}

.service-card p {
    color: var(--text-secondary);
    line-height: 1.6;
    margin-bottom: 20px;
}

.service-features {
    list-style: none;
    padding: 0;
    margin: 20px 0;
}

.service-features li {
    padding: 8px 0;
    color: var(--text-secondary);
    position: relative;
    padding-left: 25px;
}

.service-features li:before {
    content: '✓';
    position: absolute;
    left: 0;
    color: var(--accent-success);
    font-weight: bold;
}

.service-price {
    font-size: clamp(1.1rem, 3vw, 1.3rem);
    font-weight: 700;
    color: var(--accent-info);
    margin-top: 15px;
}

.service-card.pc .service-price {
    color: var(--pc-color);
}

.service-card.laptop .service-price {
    color: var(--laptop-color);
}

.service-card.hardware .service-price {
    color: var(--hardware-color);
}

.service-card.software .service-price {
    color: var(--software-color);
}

.service-card.data .service-price {
    color: var(--data-color);
}

/* Распространенные проблемы */
.common-problems {
    padding: clamp(40px, 8vw, 80px) 0;
    background: var(--bg-primary);
}

.problems-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(280px, 100%), 1fr));
    gap: clamp(20px, 4vw, 30px);
    margin-top: clamp(30px, 6vw, 50px);
}

.problem-card {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 15px;
    padding: clamp(20px, 4vw, 25px);
    transition: all 0.3s ease;
    text-align: center;
}

.problem-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px var(--shadow-color);
    border-color: var(--accent-info);
}

.problem-icon {
    font-size: clamp(2rem, 5vw, 2.2rem);
    color: var(--accent-info);
    margin-bottom: 15px;
}

.problem-card h4 {
    font-size: clamp(1.1rem, 2.5vw, 1.3rem);
    font-weight: 600;
    margin-bottom: 10px;
    color: var(--text-primary);
}

.problem-card p {
    color: var(--text-secondary);
    line-height: 1.5;
    font-size: clamp(0.9rem, 2vw, 1rem);
}

/* Процесс ремонта */
.process-section {
    padding: clamp(40px, 8vw, 80px) 0;
    background: var(--bg-secondary);
}

.process-steps {
    max-width: 800px;
    margin: clamp(30px, 6vw, 50px) auto 0;
}

.process-step {
    display: flex;
    align-items: center;
    gap: clamp(20px, 4vw, 30px);
    margin-bottom: clamp(20px, 4vw, 40px);
    padding: clamp(20px, 4vw, 25px);
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 15px;
    transition: all 0.3s ease;
}

.process-step:hover {
    transform: translateX(10px);
    border-color: var(--accent-info);
}

.step-number {
    width: clamp(50px, 8vw, 60px);
    height: clamp(50px, 8vw, 60px);
    background: linear-gradient(135deg, var(--pc-color), var(--laptop-color));
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: clamp(1.2rem, 3vw, 1.5rem);
    font-weight: 700;
    flex-shrink: 0;
    box-shadow: 0 10px 25px rgba(var(--pc-color-rgb, 67, 97, 238), 0.3);
}

.step-content h3 {
    font-size: clamp(1.1rem, 2.5vw, 1.3rem);
    font-weight: 600;
    margin-bottom: 10px;
    color: var(--text-primary);
}

.step-content p {
    color: var(--text-secondary);
    line-height: 1.6;
    font-size: clamp(0.9rem, 2vw, 1rem);
}

/* Преимущества */
.advantages-section {
    padding: clamp(40px, 8vw, 80px) 0;
    background: linear-gradient(135deg, var(--pc-color), var(--laptop-color));
    color: white;
    text-align: center;
}

.advantages-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="1" fill="rgba(255, 255, 255, 0.1)"/></svg>');
    background-size: 40px 40px;
}

.advantages-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(250px, 100%), 1fr));
    gap: clamp(20px, 4vw, 30px);
    margin-top: clamp(30px, 6vw, 50px);
    position: relative;
    z-index: 1;
}

.advantage-card {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 15px;
    padding: clamp(20px, 4vw, 30px);
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
}

.advantage-card:hover {
    transform: translateY(-10px);
    background: rgba(255, 255, 255, 0.15);
    border-color: rgba(255, 255, 255, 0.3);
}

.advantage-icon {
    font-size: clamp(2rem, 5vw, 2.5rem);
    margin-bottom: 20px;
    color: rgba(255, 255, 255, 0.9);
}

.advantage-card h3 {
    font-size: clamp(1.2rem, 3vw, 1.4rem);
    font-weight: 600;
    margin-bottom: 15px;
}

.advantage-card p {
    opacity: 0.9;
    line-height: 1.6;
    font-size: clamp(0.9rem, 2vw, 1rem);
}

/* Форма заявки */
.pc-form-section {
    padding: clamp(40px, 8vw, 80px) 0;
    background: var(--bg-secondary);
}

.pc-form-container {
    max-width: 800px;
    margin: 0 auto;
}

.form-note {
    background: var(--bg-tertiary);
    border-left: 4px solid var(--pc-color);
    padding: clamp(15px, 3vw, 20px);
    margin-bottom: clamp(20px, 4vw, 40px);
    border-radius: 8px;
}

.form-note p {
    color: var(--text-secondary);
    margin: 0;
    line-height: 1.6;
    font-size: clamp(0.9rem, 2vw, 1rem);
}

.form-note i {
    color: var(--pc-color);
    margin-right: 10px;
}

.pc-repair-form {
    background: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 20px;
    padding: clamp(20px, 4vw, 40px);
    box-shadow: 0 20px 60px var(--shadow-color);
}

.form-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(250px, 100%), 1fr));
    gap: clamp(15px, 3vw, 20px);
    margin-bottom: 20px;
}

.form-group {
    margin-bottom: clamp(15px, 4vw, 25px);
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    color: var(--text-primary);
    font-weight: 500;
    font-size: clamp(0.85rem, 2vw, 0.95rem);
}

.form-group input,
.form-group select,
.form-group textarea {
    width: 100%;
    padding: clamp(12px, 3vw, 16px) clamp(15px, 3vw, 20px);
    background: var(--input-bg);
    border: 2px solid var(--input-border);
    border-radius: 12px;
    color: var(--input-text);
    font-size: clamp(0.9rem, 2vw, 1rem);
    font-family: inherit;
    transition: all 0.3s ease;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    outline: none;
    border-color: var(--pc-color);
    background: var(--bg-tertiary);
    box-shadow: 0 0 0 3px rgba(var(--pc-color-rgb, 67, 97, 238), 0.1);
}

.form-group input::placeholder,
.form-group textarea::placeholder {
    color: var(--text-tertiary);
}

.form-group textarea {
    min-height: clamp(100px, 20vw, 120px);
    resize: vertical;
    line-height: 1.5;
}

.submit-btn {
    width: 100%;
    padding: clamp(15px, 3vw, 18px) clamp(20px, 4vw, 30px);
    background: linear-gradient(135deg, var(--pc-color), var(--laptop-color));
    color: white;
    border: none;
    border-radius: 12px;
    font-size: clamp(1rem, 2vw, 1.1rem);
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    font-family: inherit;
}

.submit-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 15px 40px rgba(var(--pc-color-rgb, 67, 97, 238), 0.4);
}

/* Диагностика ПК */
.diagnostic-section {
    background: var(--bg-tertiary);
    padding: clamp(20px, 4vw, 40px);
    margin: clamp(30px, 6vw, 60px) auto;
    border-radius: 15px;
    max-width: 800px;
    border: 2px dashed var(--border-color);
}

.diagnostic-section h3 {
    text-align: center;
    margin-bottom: 30px;
    color: var(--text-primary);
    font-size: clamp(1.2rem, 3vw, 1.5rem);
}

.diagnostic-checklist {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(180px, 100%), 1fr));
    gap: clamp(15px, 3vw, 20px);
    margin-bottom: 30px;
}

.checklist-item {
    background: var(--card-bg);
    padding: clamp(15px, 3vw, 20px);
    border-radius: 10px;
    text-align: center;
    transition: all 0.3s ease;
}

.checklist-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px var(--shadow-color);
}

.checklist-icon {
    font-size: clamp(1.5rem, 4vw, 1.8rem);
    color: var(--pc-color);
    margin-bottom: 10px;
}

.checklist-item h4 {
    font-size: clamp(0.9rem, 2vw, 1rem);
    color: var(--text-primary);
    margin-bottom: 5px;
}

.checklist-item p {
    font-size: clamp(0.8rem, 2vw, 0.9rem);
    color: var(--text-tertiary);
}

.diagnostic-btn {
    width: 100%;
    padding: clamp(12px, 3vw, 15px);
    background: linear-gradient(135deg, var(--pc-color), var(--laptop-color));
    color: white;
    border: none;
    border-radius: 10px;
    font-size: clamp(0.9rem, 2vw, 1rem);
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.diagnostic-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(var(--pc-color-rgb, 67, 97, 238), 0.3);
}

/* Контакты экстренной помощи */
.emergency-contacts {
    background: var(--pc-color);
    color: white;
    padding: clamp(20px, 4vw, 40px);
    margin-top: clamp(30px, 6vw, 60px);
    border-radius: 15px;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.emergency-contacts::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="1" fill="rgba(255, 255, 255, 0.1)"/></svg>');
    background-size: 30px 30px;
}

.emergency-contacts h2 {
    font-size: clamp(1.4rem, 4vw, 1.8rem);
    margin-bottom: 20px;
    position: relative;
    z-index: 1;
}

.emergency-contacts p {
    position: relative;
    z-index: 1;
    opacity: 0.9;
    font-size: clamp(0.9rem, 2vw, 1rem);
}

.emergency-phone {
    font-size: clamp(1.5rem, 5vw, 2rem);
    font-weight: 700;
    margin: 20px 0;
    position: relative;
    z-index: 1;
}

.emergency-phone a {
    color: white;
    text-decoration: none;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 10px;
}

.emergency-phone a:hover {
    transform: scale(1.05);
}

.emergency-note {
    opacity: 0.9;
    font-size: clamp(0.9rem, 2vw, 1.1rem);
    position: relative;
    z-index: 1;
}

/* Анимации */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.pc-repair-hero-content,
.service-card,
.problem-card,
.process-step,
.advantage-card,
.pc-repair-form {
    animation: fadeInUp 0.6s ease-out forwards;
    opacity: 0;
}

/* Эффект пульсации для кнопки */
@keyframes pulse {
    0% {
        box-shadow: 0 0 0 0 rgba(var(--pc-color-rgb, 67, 97, 238), 0.4);
    }
    70% {
        box-shadow: 0 0 0 10px rgba(var(--pc-color-rgb, 67, 97, 238), 0);
    }
    100% {
        box-shadow: 0 0 0 0 rgba(var(--pc-color-rgb, 67, 97, 238), 0);
    }
}

.submit-btn:focus {
    animation: pulse 1.5s infinite;
}

/* Плавные переходы между темами */
* {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

/* Улучшенная поддержка тем для всех элементов */
input, textarea, select {
    background-color: var(--input-bg) !important;
    color: var(--input-text) !important;
    border-color: var(--input-border) !important;
}

/* Стили для чекбоксов */
.form-group label input[type="checkbox"] {
    width: clamp(16px, 3vw, 18px);
    height: clamp(16px, 3vw, 18px);
    margin-right: 10px;
    accent-color: var(--pc-color);
    vertical-align: middle;
    cursor: pointer;
}

.form-group label {
    display: flex;
    align-items: center;
    cursor: pointer;
    user-select: none;
    font-size: clamp(0.9rem, 2vw, 1rem);
}

/* Адаптивность для очень маленьких экранов */
@media (max-width: 480px) {
    .process-step {
        flex-direction: column;
        text-align: center;
        gap: 15px;
    }
    
    .step-number {
        width: 70px;
        height: 70px;
        font-size: 1.4rem;
    }
    
    .service-features li {
        padding-left: 20px;
        font-size: 0.9rem;
    }
}

/* Поддержка высокого контраста */
@media (prefers-contrast: high) {
    :root {
        --text-primary: #000000;
        --text-secondary: #333333;
        --border-color: #000000;
    }
    
    body.dark-theme {
        --text-primary: #ffffff;
        --text-secondary: #cccccc;
        --border-color: #ffffff;
    }
    
    .service-card:hover {
        outline: 2px solid var(--accent-info);
        outline-offset: 2px;
    }
}

/* Поддержка уменьшенного движения */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
    
    .pc-repair-hero-content,
    .service-card,
    .process-step,
    .advantage-card,
    .pc-repair-form {
        animation: none;
        opacity: 1;
    }
}
</style>

<!-- Герой секция -->
<section class="pc-repair-hero">
    <div class="pc-repair-hero-content">
        <div class="pc-repair-badge">
            <i class="fas fa-desktop"></i> Профессиональный ремонт компьютеров и ноутбуков
        </div>
        <h1>Ремонт ПК и ноутбуков любой сложности</h1>
        <p>Быстрое восстановление работоспособности компьютеров, ноутбуков и периферии. Работаем с любыми брендами и моделями.</p>
        <a href="#pc-form" class="btn btn-primary btn-large">
            <i class="fas fa-tools"></i> Вызвать мастера
        </a>
    </div>
</section>

<!-- Услуги ремонта ПК и ноутбуков -->
<section class="services-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Наши услуги по ремонту</h2>
            <p class="section-subtitle">Комплексные решения для домашних и офисных компьютеров</p>
        </div>

        <div class="services-grid">
            <div class="service-card pc">
                <div class="service-icon">
                    <i class="fas fa-desktop"></i>
                </div>
                <h3>Ремонт компьютеров</h3>
                <p>Диагностика и ремонт системных блоков, замена комплектующих, сборка ПК под заказ</p>
                <ul class="service-features">
                    <li>Диагностика неисправностей</li>
                    <li>Замена блока питания</li>
                    <li>Ремонт материнской платы</li>
                    <li>Чистка от пыли</li>
                </ul>
                <div class="service-price">от 1 000 ₽</div>
            </div>

            <div class="service-card laptop">
                <div class="service-icon">
                    <i class="fas fa-laptop"></i>
                </div>
                <h3>Ремонт ноутбуков</h3>
                <p>Ремонт любых ноутбуков: от замены матрицы до микросхемного ремонта материнской платы</p>
                <ul class="service-features">
                    <li>Замена экрана ноутбука</li>
                    <li>Ремонт клавиатуры</li>
                    <li>Чистка системы охлаждения</li>
                    <li>Замена термопасты</li>
                </ul>
                <div class="service-price">от 1 500 ₽</div>
            </div>

            <div class="service-card hardware">
                <div class="service-icon">
                    <i class="fas fa-microchip"></i>
                </div>
                <h3>Аппаратный ремонт</h3>
                <p>Ремонт на компонентном уровне: замена чипов, восстановление BGA пайки, ремонт видеокарт</p>
                <ul class="service-features">
                    <li>Ремонт видеокарт</li>
                    <li>BGA пайка чипов</li>
                    <li>Замена северного/южного моста</li>
                    <li>Ремонт процессоров</li>
                </ul>
                <div class="service-price">от 3 000 ₽</div>
            </div>

            <div class="service-card software">
                <div class="service-icon">
                    <i class="fas fa-code"></i>
                </div>
                <h3>Программный ремонт</h3>
                <p>Установка и настройка ОС, восстановление данных, удаление вирусов, оптимизация</p>
                <ul class="service-features">
                    <li>Установка Windows</li>
                    <li>Удаление вирусов</li>
                    <li>Настройка драйверов</li>
                    <li>Оптимизация системы</li>
                </ul>
                <div class="service-price">от 800 ₽</div>
            </div>

            <div class="service-card data">
                <div class="service-icon">
                    <i class="fas fa-database"></i>
                </div>
                <h3>Восстановление данных</h3>
                <p>Восстановление удаленных файлов с жестких дисков, SSD, флешек и карт памяти</p>
                <ul class="service-features">
                    <li>Восстановление HDD/SSD</li>
                    <li>Ремонт флешек</li>
                    <li>Восстановление RAID массивов</li>
                    <li>Спасение данных после форматирования</li>
                </ul>
                <div class="service-price">от 2 000 ₽</div>
            </div>
        </div>
    </div>
</section>

<!-- Распространенные проблемы -->
<section class="common-problems">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Распространенные проблемы</h2>
            <p class="section-subtitle">С какими неисправностями мы чаще всего сталкиваемся</p>
        </div>

        <div class="problems-grid">
            <div class="problem-card">
                <div class="problem-icon">
                    <i class="fas fa-ban"></i>
                </div>
                <h4>Не включается</h4>
                <p>Компьютер или ноутбук не реагирует на кнопку включения</p>
            </div>

            <div class="problem-card">
                <div class="problem-icon">
                    <i class="fas fa-thermometer-half"></i>
                </div>
                <h4>Перегревается</h4>
                <p>Система перезагружается или выключается из-за перегрева</p>
            </div>

            <div class="problem-card">
                <div class="problem-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h4>Синий экран</h4>
                <p>Появляется синий экран смерти (BSOD) с ошибками</p>
            </div>

            <div class="problem-card">
                <div class="problem-icon">
                    <i class="fas fa-tachometer-alt"></i>
                </div>
                <h4>Тормозит</h4>
                <p>Система работает медленно, программы зависают</p>
            </div>

            <div class="problem-card">
                <div class="problem-icon">
                    <i class="fas fa-virus"></i>
                </div>
                <h4>Вирусы</h4>
                <p>Заражение системы вредоносным ПО, реклама</p>
            </div>

            <div class="problem-card">
                <div class="problem-icon">
                    <i class="fas fa-hdd"></i>
                </div>
                <h4>Шумит жесткий диск</h4>
                <p>Посторонние звуки из системного блока</p>
            </div>
        </div>
    </div>
</section>



<!-- Диагностика ПК -->
<div class="diagnostic-section">
    <h3>Проверьте состояние вашего компьютера</h3>
    <div class="diagnostic-checklist">
        <div class="checklist-item">
            <div class="checklist-icon">
                <i class="fas fa-thermometer-half"></i>
            </div>
            <h4>Температура</h4>
            <p>Проверка перегрева</p>
        </div>
        <div class="checklist-item">
            <div class="checklist-icon">
                <i class="fas fa-hdd"></i>
            </div>
            <h4>Жесткий диск</h4>
            <p>Состояние HDD/SSD</p>
        </div>
        <div class="checklist-item">
            <div class="checklist-icon">
                <i class="fas fa-memory"></i>
            </div>
            <h4>Оперативная память</h4>
            <p>Тест на ошибки</p>
        </div>
        <div class="checklist-item">
            <div class="checklist-icon">
                <i class="fas fa-virus"></i>
            </div>
            <h4>Вирусы</h4>
            <p>Проверка безопасности</p>
        </div>
    </div>
    <button class="diagnostic-btn" id="start-diagnostic">
        <i class="fas fa-search"></i> Запросить бесплатную диагностику
    </button>
</div>

<!-- Преимущества -->
<section class="advantages-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Почему выбирают нас</h2>
            <p class="section-subtitle">Профессионализм и качество в каждой детали</p>
        </div>

        <div class="advantages-grid">
            <div class="advantage-card">
                <div class="advantage-icon">
                    <i class="fas fa-bolt"></i>
                </div>
                <h3>Срочный ремонт</h3>
                <p>Многие ремонты выполняем в день обращения</p>
            </div>

            <div class="advantage-card">
                <div class="advantage-icon">
                    <i class="fas fa-user-shield"></i>
                </div>
                <h3>Гарантия 1 год</h3>
                <p>Даем официальную гарантию на все виды работ</p>
            </div>

            <div class="advantage-card">
                <div class="advantage-icon">
                    <i class="fas fa-headset"></i>
                </div>
                <h3>Круглосуточная поддержка</h3>
                <p>Готовы помочь в любое время дня и ночи</p>
            </div>

            <div class="advantage-card">
                <div class="advantage-icon">
                    <i class="fas fa-tools"></i>
                </div>
                <h3>Современное оборудование</h3>
                <p>Работаем на профессиональном оборудовании</p>
            </div>
        </div>
    </div>
</section>

<!-- Форма заявки -->
<section class="pc-form-section" id="pc-form">
    <div class="container">
        <div class="pc-form-container">
            <div class="section-header">
                <h2 class="section-title">Заявка на ремонт ПК/ноутбука</h2>
                <p class="section-subtitle">Оставьте заявку и наш специалист свяжется с вами в течение 15 минут</p>
            </div>

            <div class="form-note">
                <p><i class="fas fa-info-circle"></i> Диагностика проводится бесплатно при последующем ремонте.</p>
            </div>

            <form action="/api/pc-repair/request" method="POST" class="pc-repair-form" id="pcRepairRequestForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="name">Ваше имя *</label>
                        <input type="text" id="name" name="name" placeholder="Иван Иванов" required>
                    </div>

                    <div class="form-group">
                        <label for="phone">Телефон *</label>
                        <input type="tel" id="phone" name="phone" placeholder="+7 (___) ___-__-__" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="device_type">Тип устройства *</label>
                        <select id="device_type" name="device_type" required>
                            <option value="">Выберите устройство</option>
                            <option value="desktop">Стационарный компьютер</option>
                            <option value="laptop">Ноутбук</option>
                            <option value="monitor">Монитор</option>
                            <option value="printer">Принтер/сканер</option>
                            <option value="other">Другое устройство</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="brand">Бренд</label>
                        <input type="text" id="brand" name="brand" placeholder="Например: HP, Dell, Asus">
                    </div>
                </div>

                <div class="form-group">
                    <label for="problem_type">Тип проблемы *</label>
                    <select id="problem_type" name="problem_type" required>
                        <option value="">Выберите проблему</option>
                        <option value="not_turning_on">Не включается</option>
                        <option value="overheating">Перегревается</option>
                        <option value="bsod">Синий экран (BSOD)</option>
                        <option value="slow">Тормозит/медленно работает</option>
                        <option value="no_display">Нет изображения</option>
                        <option value="virus">Вирусы/вредоносное ПО</option>
                        <option value="data_recovery">Восстановление данных</option>
                        <option value="other">Другая проблема</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="problem_description">Описание проблемы *</label>
                    <textarea id="problem_description" name="problem_description" placeholder="Опишите проблему: что произошло, когда появилась, предшествующие события..." required></textarea>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" name="urgent_repair" id="urgent_repair">
                        Нужен срочный ремонт (выполняем в течение 24 часов)
                    </label>
                </div>

                <button type="submit" class="submit-btn">
                    <i class="fas fa-tools"></i> Вызвать мастера по ПК
                </button>

                <p style="text-align: center; margin-top: 20px; color: var(--text-tertiary); font-size: 0.9rem;">
                    Нажимая кнопку, вы соглашаетесь с политикой конфиденциальности
                </p>
            </form>

            <!-- Контакты экстренной помощи -->
            <div class="emergency-contacts">
                <h2>Экстренная помощь по компьютерам</h2>
                <p>Если срочно нужна помощь с компьютером или ноутбуком</p>
                <div class="emergency-phone">
                    <a href="tel:+79998887766">
                        <i class="fas fa-phone-alt"></i> +7 (999) 888-77-66
                    </a>
                </div>
                <p class="emergency-note">Круглосуточная поддержка по ремонту техники</p>
            </div>
        </div>
    </div>
</section>

<!-- JavaScript -->
<script>
    // Обработка формы заявки
    document.getElementById('pcRepairRequestForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        const formData = new FormData(this);
        const submitBtn = this.querySelector('.submit-btn');
        const originalText = submitBtn.innerHTML;
        
        // Показываем индикатор загрузки
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Отправка...';
        submitBtn.disabled = true;
        
        try {
            const response = await fetch('/api/pc-repair/request', {
                method: 'POST',
                body: formData
            });
            
            const result = await response.json();
            
            if (result.success) {
                // Успешная отправка
                alert('Спасибо! Ваша заявка на ремонт принята. Мастер свяжется с вами в течение 15 минут.');
                this.reset();
                
                // Показываем сообщение об успехе
                submitBtn.innerHTML = '<i class="fas fa-check"></i> Отправлено!';
                submitBtn.style.background = 'var(--accent-success)';
                
                setTimeout(() => {
                    submitBtn.innerHTML = originalText;
                    submitBtn.style.background = '';
                    submitBtn.disabled = false;
                }, 2000);
            } else {
                // Ошибка
                alert('Ошибка: ' + result.message);
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }
        } catch (error) {
            console.error('Ошибка:', error);
            alert('Произошла ошибка при отправке формы. Пожалуйста, попробуйте еще раз.');
            submitBtn.innerHTML = originalText;
            submitBtn.disabled = false;
        }
    });

    // Маска для телефона
    document.getElementById('phone').addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        if (value.length > 0) {
            if (value.length <= 1) value = '+7' + value;
            if (value.length <= 4) value = value.replace(/(\+7)(\d{0,3})/, '$1 ($2');
            if (value.length <= 7) value = value.replace(/(\+7\s\(\d{3})(\d{0,3})/, '$1) $2');
            if (value.length <= 9) value = value.replace(/(\+7\s\(\d{3}\)\s\d{3})(\d{0,2})/, '$1-$2');
            if (value.length <= 11) value = value.replace(/(\+7\s\(\d{3}\)\s\d{3}-\d{2})(\d{0,2})/, '$1-$2');
        }
        e.target.value = value;
    });

    // Обработка кнопки диагностики
    document.getElementById('start-diagnostic').addEventListener('click', async function() {
        const diagnosticBtn = this;
        const originalText = diagnosticBtn.innerHTML;
        
        // Блокируем кнопку
        diagnosticBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Отправка запроса...';
        diagnosticBtn.disabled = true;
        
        try {
            // Имитация отправки запроса
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            // Успешная отправка
            alert('Запрос на бесплатную диагностику отправлен! Наш специалист свяжется с вами для уточнения деталей.');
            
            diagnosticBtn.innerHTML = originalText;
            diagnosticBtn.disabled = false;
            
        } catch (error) {
            console.error('Ошибка:', error);
            alert('Произошла ошибка при отправке запроса. Пожалуйста, попробуйте еще раз.');
            
            diagnosticBtn.innerHTML = originalText;
            diagnosticBtn.disabled = false;
        }
    });

    // Обработка выбора типа устройства
    document.getElementById('device_type').addEventListener('change', function() {
        const descriptionField = document.getElementById('problem_description');
        const brandField = document.getElementById('brand');
        
        const placeholders = {
            'desktop': 'Опишите проблему: характеристики компьютера, когда появилась проблема, предшествующие события...',
            'laptop': 'Опишите проблему: модель ноутбука, возраст, как проявляется проблема...',
            'monitor': 'Опишите проблему: размер монитора, есть ли изображение, какие артефакты...',
            'printer': 'Опишите проблему: модель принтера, что именно не работает, ошибки на дисплее...',
            'other': 'Опишите ваше устройство и проблему максимально подробно...'
        };
        
        const brandPlaceholders = {
            'desktop': 'Например: самосборка, Dell, HP',
            'laptop': 'Например: Asus, Lenovo, Acer',
            'monitor': 'Например: Samsung, LG, Dell',
            'printer': 'Например: HP, Canon, Epson',
            'other': 'Производитель устройства'
        };
        
        descriptionField.placeholder = placeholders[this.value] || 'Опишите вашу проблему...';
        brandField.placeholder = brandPlaceholders[this.value] || 'Например: HP, Dell, Asus';
    });

    // Обработка выбора типа проблемы
    document.getElementById('problem_type').addEventListener('change', function() {
        const descriptionField = document.getElementById('problem_description');
        
        const problemDetails = {
            'not_turning_on': 'Опишите подробно: реагирует ли на кнопку включения, горят ли индикаторы, были ли скачки напряжения...',
            'overheating': 'Опишите: как давно начался перегрев, выключается ли сам, какие программы запущены, чистили ли систему охлаждения...',
            'bsod': 'Опишите: код ошибки если есть, при каких действиях появляется, как часто возникает...',
            'slow': 'Опишите: какие программы тормозят, давно ли проблема, пытались ли чистить систему, характеристики компьютера...',
            'no_display': 'Опишите: есть ли изображение при запуске, слышны ли звуки работы системы, проверяли ли монитор...',
            'virus': 'Опишите: какие симптомы заражения, какие антивирусы использовали, что пытались удалить...',
            'data_recovery': 'Опишите: что случилось с данными, тип накопителя, важность данных, пытались ли восстановить...',
            'other': 'Опишите вашу проблему максимально подробно...'
        };
        
        descriptionField.placeholder = problemDetails[this.value] || 'Опишите вашу проблему...';
    });
</script>
{% endblock %}